<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>모바일 핵폭탄 폭발</title>
<style>
  body {
    margin: 0;
    height: 100vh;
    overflow: hidden;
    background: #87ceeb;
    position: relative;
    font-family: sans-serif;
    touch-action: manipulation; /* 모바일 터치 최적화 */
  }

  #ground {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 100px;
    background: #4caf50;
    z-index: 1;
  }

  #house {
    position: absolute;
    bottom: 100px;
    left: 50%;
    transform: translateX(-50%);
    width: 80px;
    height: 80px;
    background: #f28c8c;
    cursor: pointer;
    z-index: 2;
    touch-action: manipulation;
  }

  #roof {
    position: absolute;
    top: -40px;
    left: -20px;
    width: 120px;
    height: 40px;
    background: #d2691e;
    clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
  }

  .explosion {
    position: absolute;
    border-radius: 50%;
    pointer-events: none;
    z-index: 3;
  }

  #flash {
    position: absolute;
    top: 0; left: 0;
    width: 100%;
    height: 100%;
    background: white;
    opacity: 0;
    z-index: 5;
    pointer-events: none;
  }

  #resetBtn {
    position: absolute;
    right: 20px;
    bottom: 20px;
    padding: 10px 20px;
    font-size: 16px;
    cursor: pointer;
    z-index: 6;
    touch-action: manipulation;
  }

</style>
</head>
<body>

<div id="house">
  <div id="roof"></div>
</div>
<div id="ground"></div>
<div id="flash"></div>
<button id="resetBtn">복귀</button>

<script>
const house = document.getElementById('house');
const resetBtn = document.getElementById('resetBtn');
const flash = document.getElementById('flash');
const colors = ['#ff4500','#ffa500','#ffff00','#ff6347','#ffffff'];

// 폭발 함수
function explodeCenter() {
  house.style.display = 'none';

  const centerX = window.innerWidth / 2;
  const centerY = window.innerHeight / 2;

  // 플래시 효과
  flash.style.opacity = 1;
  setTimeout(() => { flash.style.opacity = 0; }, 200);

  const pieces = [];
  for(let i=0;i<100;i++){
    const piece = document.createElement('div');
    piece.classList.add('explosion');

    const size = Math.random()*15 + 10;
    piece.style.width = size + 'px';
    piece.style.height = size + 'px';
    piece.style.background = colors[Math.floor(Math.random()*colors.length)];
    piece.style.left = centerX - size/2 + 'px';
    piece.style.top = centerY - size/2 + 'px';

    // 물리 속성
    const angle = Math.random()*2*Math.PI;
    const speed = Math.random()*15 + 10;
    piece.vx = Math.cos(angle)*speed;
    piece.vy = Math.sin(angle)*speed - 5;
    piece.gravity = 0.5;
    piece.friction = 0.98;

    document.body.appendChild(piece);
    pieces.push(piece);
  }

  // 애니메이션 루프
  function animate() {
    pieces.forEach(p=>{
      p.vy += p.gravity;
      p.vx *= p.friction;
      p.vy *= p.friction;
      const left = parseFloat(p.style.left);
      const top = parseFloat(p.style.top);
      p.style.left = left + p.vx + 'px';
      p.style.top = top + p.vy + 'px';
    });
    if(pieces.length>0){
      requestAnimationFrame(animate);
    }
  }
  animate();
}

// 클릭 및 모바일 터치
house.addEventListener('click', explodeCenter);
house.addEventListener('touchstart', (e)=>{
  e.preventDefault();
  explodeCenter();
});

// 복귀 버튼
resetBtn.addEventListener('click', () => {
  house.style.display = 'block';
});
resetBtn.addEventListener('touchstart', (e)=>{
  e.preventDefault();
  house.style.display = 'block';
});
</script>

</body>
</html>
